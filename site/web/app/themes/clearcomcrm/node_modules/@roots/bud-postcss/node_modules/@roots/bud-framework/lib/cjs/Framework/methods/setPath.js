"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.setPath = void 0;
const bud_support_1 = require("@roots/bud-support");
const { isString } = bud_support_1.lodash;
const transformShorthandBase = (app, base) => {
    const parts = base.includes('/') ? base.split('/') : [base];
    parts[0] = app.hooks.filter(`location.${parts[0]}`);
    return parts.join('/');
};
/**
 * Set a {@link @roots/bud-framework#Location | Location} value
 *
 * @remarks
 * The {@link Location.project} should be an absolute path.
 * All other directories should be relative (src, dist, etc.)
 * @see {@link Locations}
 *
 * @example
 * ```js
 * bud.setPath('@src', 'custom/src')
 * ```
 *
 * @public
 */
function setPath(arg1, arg2) {
    const ctx = this;
    const input = isString(arg1) ? { [arg1]: arg2 } : arg1;
    Object.entries(input).map(([key, value]) => {
        value = value.startsWith(`@`)
            ? transformShorthandBase(ctx, value)
            : value;
        ctx.hooks.on(`location.${key}`, value);
        ctx.info(`${key} set to ${value}`);
    });
    return ctx;
}
exports.setPath = setPath;
